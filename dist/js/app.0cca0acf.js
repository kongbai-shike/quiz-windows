(function(){"use strict";var e={8119:function(e,t,o){var s=o(6848),a=function(){var e=this,t=e._self._c;return t("div",[t("router-view")],1)},r=[],i={components:{},data(){return{message:"hello vue"}},methods:{}},l=i,n=o(1656),c=(0,n.A)(l,a,r,!1,null,null,null),u=c.exports,d=(o(8111),o(3579),o(6178)),m=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",{staticStyle:{"font-size":"40px","background-color":"rgb(238, 241, 246)"}},[e._v("Quiz后台管理 "),t("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{type:"danger",size:"mini"},on:{click:e.logout}},[e._v("退出")])],1),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1"]}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[e._v("管理选项")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"1-1"}},[t("router-link",{attrs:{to:"/user"}},[e._v("用户管理")])],1),t("el-menu-item",{attrs:{index:"1-2"}},[t("router-link",{attrs:{to:"/question"}},[e._v("题目管理")])],1)],1)],2)],1)],1),t("el-main",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{placeholder:"请输入用户名关键词"},model:{value:e.formInline.keyword,callback:function(t){e.$set(e.formInline,"keyword",t)},expression:"formInline.keyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.onAddNewUser}},[e._v("添加用户")])],1)],1),t("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.id))])]}}])}),t("el-table-column",{attrs:{label:"用户名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.userName))])])]}}])}),t("el-table-column",{attrs:{label:"密码",width:"180"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.userPassword))])]}}])}),t("el-table-column",{attrs:{label:"用户角色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(1===o.row.userRole?"管理员":"普通用户")+" ")])]}}])}),t("el-table-column",{attrs:{label:"更新时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.formatDate(o.row.updateTime)))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(o.$index,o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(o.$index,o.row)}}},[e._v("删除")])]}}])})],1),t("br"),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}}),t("el-dialog",{attrs:{title:"添加新用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.form.checkpassword,callback:function(t){e.$set(e.form,"checkpassword",t)},expression:"form.checkpassword"}})],1),t("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth}},[t("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.form.userRole,callback:function(t){e.$set(e.form,"userRole",t)},expression:"form.userRole"}},[t("el-option",{attrs:{label:"普通用户",value:0}}),t("el-option",{attrs:{label:"管理员",value:1}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑用户",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{attrs:{model:e.editForm}},[t("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off","show-password":"",placeholder:"留空表示不修改密码"},model:{value:e.editForm.userPassword,callback:function(t){e.$set(e.editForm,"userPassword",t)},expression:"editForm.userPassword"}})],1),t("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth}},[t("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.editForm.userRole,callback:function(t){e.$set(e.editForm,"userRole",t)},expression:"editForm.userRole"}},[t("el-option",{attrs:{label:"普通用户",value:0}}),t("el-option",{attrs:{label:"管理员",value:1}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"操作结果",visible:e.successDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.successDialogVisible=t}}},[t("span",[e._v(e._s(e.successMessage))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successDialogVisible=!1}}},[e._v("确 定")])],1)])],1)],1)],1)},f=[],p=(o(4114),o(4373)),h={data(){return{currentPage:1,dialogFormVisible:!1,editDialogVisible:!1,pageSize:5,total:0,formInline:{keyword:""},tableData:[],form:{username:"",password:"",checkpassword:"",userRole:0},editForm:{id:"",userName:"",userPassword:"",userRole:0},formLabelWidth:"120px",successDialogVisible:!1,successMessage:""}},methods:{logout(){localStorage.removeItem("jwt_token"),localStorage.removeItem("role"),this.$router.push("/login"),this.$message({type:"success",message:"已退出登录"})},onAddNewUser(){this.dialogFormVisible=!0},submitUser(){console.log("Submitting user:",this.form);const e={username:this.form.username,password:this.form.password,checkpassword:this.form.checkpassword,userrole:String(this.form.userRole)};p.A.post("/addUser",e,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("User added successfully:",e.data),1===e.data.code?this.successMessage=e.data.msg||"添加用户成功":this.successMessage=e.data.msg||"操作完成",this.successDialogVisible=!0,this.dialogFormVisible=!1,this.form={username:"",password:"",checkpassword:"",userRole:0},this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error adding user:",e),this.successMessage="添加用户失败，请重试",this.successDialogVisible=!0})},onSearch(){console.log("Searching for:",this.formInline.keyword),p.A.get(`/findUser?keyword=${this.formInline.keyword}`).then(e=>{this.tableData=e.data.data,console.log("Search results:",e.data)}).catch(e=>{console.error("Error searching users:",e)})},handleEdit(e,t){console.log("Editing user:",t),this.editForm={id:t.id,userName:t.userName,userPassword:"",userRole:t.userRole},this.editDialogVisible=!0},submitEdit(){console.log("Updating user:",this.editForm);const e={id:this.editForm.id,userName:this.editForm.userName,userPassword:this.editForm.userPassword,userRole:this.editForm.userRole};p.A.post("/updateUser",e,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("User updated successfully:",e.data),1===e.data.code?this.successMessage=e.data.msg||"用户更新成功":this.successMessage=e.data.msg||"操作完成",this.successDialogVisible=!0,this.editDialogVisible=!1,this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error updating user:",e),this.successMessage="更新用户失败，请重试",this.successDialogVisible=!0})},handleDelete(e,t){const o=t.id;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.A.get(`/deleteById?id=${o}`).then(e=>{console.log(e.data),this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error deleting user:",e),this.$message({type:"error",message:"删除失败，请稍后重试!"})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handlePageChange(e){this.currentPage=e,p.A.get(`/users?page=${this.currentPage}&pageSize=${this.pageSize}`).then(e=>{this.tableData=e.data.data.row,this.total=e.data.data.total}).catch(e=>{console.error("Error fetching users:",e)})},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleString()}},mounted(){p.A.get("/users").then(e=>{console.log(e.data);const t=e.data.data.row;this.tableData=t,this.total=e.data.data.total}).catch(e=>{console.error("Error fetching users:",e)}),this.handlePageChange(1)}},g=h,b=(0,n.A)(g,m,f,!1,null,null,null),w=b.exports,v=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",{staticStyle:{"font-size":"40px","background-color":"rgb(238, 241, 246)"}},[e._v("Quiz后台管理 "),t("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{type:"danger",size:"mini"},on:{click:e.logout}},[e._v("退出")])],1),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1"]}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[e._v("管理选项")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"1-1"}},[t("router-link",{attrs:{to:"/user"}},[e._v("用户管理")])],1),t("el-menu-item",{attrs:{index:"1-2"}},[t("router-link",{attrs:{to:"/question"}},[e._v("题目管理")])],1)],1)],2)],1)],1),t("el-main",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"题目"}},[t("el-input",{attrs:{placeholder:"请输入题目关键词"},model:{value:e.formInline.keyword,callback:function(t){e.$set(e.formInline,"keyword",t)},expression:"formInline.keyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.onAddNewQuestion}},[e._v("添加题目")])],1)],1),t("el-table",{staticStyle:{width:"80%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.id))])]}}])}),t("el-table-column",{attrs:{label:"题目",width:"250"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.questionText))])])]}}])}),t("el-table-column",{attrs:{label:"选项",width:"260"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.options))])]}}])}),t("el-table-column",{attrs:{label:"答案",width:"180"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row.answer))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(o.$index,o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(o.$index,o.row)}}},[e._v("删除")])]}}])})],1),t("br"),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}}),t("el-dialog",{attrs:{title:"添加新题目",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"题目","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),t("el-form-item",{attrs:{label:"选项a","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.optiona,callback:function(t){e.$set(e.form,"optiona",t)},expression:"form.optiona"}})],1),t("el-form-item",{attrs:{label:"选项b","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.optionb,callback:function(t){e.$set(e.form,"optionb",t)},expression:"form.optionb"}})],1),t("el-form-item",{attrs:{label:"选项c","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.optionc,callback:function(t){e.$set(e.form,"optionc",t)},expression:"form.optionc"}})],1),t("el-form-item",{attrs:{label:"选项d","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.optiond,callback:function(t){e.$set(e.form,"optiond",t)},expression:"form.optiond"}})],1),t("el-form-item",{attrs:{label:"答案","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestion}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑题目",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{attrs:{model:e.editForm}},[t("el-form-item",{attrs:{label:"题目","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.question,callback:function(t){e.$set(e.editForm,"question",t)},expression:"editForm.question"}})],1),t("el-form-item",{attrs:{label:"选项a","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.optiona,callback:function(t){e.$set(e.editForm,"optiona",t)},expression:"editForm.optiona"}})],1),t("el-form-item",{attrs:{label:"选项b","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.optionb,callback:function(t){e.$set(e.editForm,"optionb",t)},expression:"editForm.optionb"}})],1),t("el-form-item",{attrs:{label:"选项c","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.optionc,callback:function(t){e.$set(e.editForm,"optionc",t)},expression:"editForm.optionc"}})],1),t("el-form-item",{attrs:{label:"选项d","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.optiond,callback:function(t){e.$set(e.editForm,"optiond",t)},expression:"editForm.optiond"}})],1),t("el-form-item",{attrs:{label:"答案","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.answer,callback:function(t){e.$set(e.editForm,"answer",t)},expression:"editForm.answer"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"操作结果",visible:e.successDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.successDialogVisible=t}}},[t("span",[e._v(e._s(e.successMessage))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successDialogVisible=!1}}},[e._v("确 定")])],1)])],1)],1)],1)},y=[],k={data(){return{currentPage:1,dialogFormVisible:!1,pageSize:5,total:0,formInline:{keyword:""},tableData:[],form:{question:"",optiona:"",optionb:"",optionc:"",optiond:"",answer:""},editDialogVisible:!1,editForm:{id:"",question:"",optiona:"",optionb:"",optionc:"",optiond:"",answer:""},formLabelWidth:"120px",successDialogVisible:!1,successMessage:""}},methods:{logout(){localStorage.removeItem("jwt_token"),this.$router.push("/login"),this.$message({type:"success",message:"已退出登录"})},onAddNewQuestion(){this.dialogFormVisible=!0},submitQuestion(){console.log("Submitting question:",this.form),p.A.post("/addQuestion",this.form,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Question added successfully:",e.data),1===e.data.code?this.successMessage=e.data.msg||"插入新问题成功":this.successMessage=e.data.msg||"操作完成",this.successDialogVisible=!0,this.dialogFormVisible=!1,this.form={question:"",optiona:"",optionb:"",optionc:"",optiond:"",answer:""},this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error adding question:",e),this.successMessage="添加题目失败，请重试",this.successDialogVisible=!0})},onSearch(){console.log("Searching for:",this.formInline.keyword),p.A.get(`/findQuestion?keyword=${this.formInline.keyword}`).then(e=>{this.tableData=e.data.data,console.log("Search results:",e.data)}).catch(e=>{console.error("Error searching questions:",e)})},handleEdit(e,t){console.log("Editing question:",t),this.editForm={id:t.id,question:t.questionText,optiona:t.options[0]||"",optionb:t.options[1]||"",optionc:t.options[2]||"",optiond:t.options[3]||"",answer:t.answer},this.editDialogVisible=!0},getCorrectAnswer(e){return e.answer1Correct?"a":e.answer2Correct?"b":e.answer3Correct?"c":e.answer4Correct?"d":""},submitEdit(){console.log("Updating question:",this.editForm),p.A.post("/updateQuestion",this.editForm,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Question updated successfully:",e.data),1===e.data.code?this.successMessage=e.data.msg||"更新问题成功":this.successMessage=e.data.msg||"操作完成",this.successDialogVisible=!0,this.editDialogVisible=!1,this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error updating question:",e),this.successMessage="更新题目失败，请重试",this.successDialogVisible=!0})},handleDelete(e,t){const o=t.id;this.$confirm("此操作将永久删除该题目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.A.get(`/delQuestion?id=${o}`).then(e=>{console.log(e.data),this.handlePageChange(this.currentPage)}).catch(e=>{console.error("Error deleting question:",e),this.$message({type:"error",message:"删除失败，请稍后重试!"})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handlePageChange(e){this.currentPage=e,p.A.get(`/questions?page=${this.currentPage}&pageSize=${this.pageSize}`).then(e=>{this.tableData=e.data.data.qsBeanList,this.total=e.data.data.total}).catch(e=>{console.error("Error fetching questions:",e)})}},mounted(){p.A.get("/questions").then(e=>{console.log(e.data);const t=e.data.data.qsBeanList;this.tableData=t,this.total=e.data.data.total}).catch(e=>{console.error("Error fetching questions:",e)}),this.handlePageChange(1)}},_=k,x=(0,n.A)(_,v,y,!1,null,null,null),S=x.exports,F=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",{staticStyle:{"font-size":"40px","background-color":"rgb(238, 241, 246)",display:"flex","justify-content":"center","align-items":"center"}},[e._v(" Quiz后台管理系统登录 ")]),t("el-main",[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)],1)},$=[],D={name:"LoginView",data(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},LOGIN_PATH:"/login"}},methods:{onSubmit(){this.$refs.loginForm.validate(e=>{e?this.login():this.$message.error("表单验证失败")})},async login(){try{const e=await p.A.post(this.LOGIN_PATH,{username:this.form.username,password:this.form.password},{headers:{"Content-Type":"application/json"}}),{code:t,data:o,msg:s}=e.data||{};if(1!==t)return void this.$message.error("登录失败："+(s||"未知错误"));const a=o&&(o.token??o)||"",r=o&&o.role;if(!a)return void this.$message.error("登录失败：未获取到令牌");if(localStorage.setItem("jwt_token",a),1!==Number(r))return void this.$message.error("无管理员权限");localStorage.setItem("role",String(r)),this.$message.success("登录成功"),this.$router.push("/user")}catch(e){console.error("登录异常:",e),this.$message.error("登录异常")}}}},P=D,V=(0,n.A)(P,F,$,!1,null,null,null),q=V.exports;s["default"].use(d.Ay);const A=[{path:"/",redirect:"/login"},{path:"/user",name:"user",component:w,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/question",name:"question",component:S,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/login",name:"login",component:q}],C=new d.Ay({routes:A});C.beforeEach((e,t,o)=>{const s=e.matched.some(e=>e.meta.requiresAuth),a=e.matched.some(e=>e.meta.requiresAdmin);if(!s)return void o();const r=localStorage.getItem("jwt_token");if(r){if(a){const e=Number(localStorage.getItem("role"));if(1!==e)return void o("/login")}o()}else o("/login")});var L=C,I=o(1524),E=o.n(I);p.A.defaults.baseURL="http://localhost:8080",p.A.defaults.withCredentials=!0,p.A.interceptors.request.use(e=>{const t=localStorage.getItem("jwt_token");return t&&(e.headers.token=t),e},e=>Promise.reject(e)),s["default"].prototype.$axios=p.A,s["default"].use(E()),s["default"].config.productionTip=!1,new s["default"]({router:L,render:e=>e(u)}).$mount("#app")}},t={};function o(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,s,a,r){if(!s){var i=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],r=e[u][2];for(var l=!0,n=0;n<s.length;n++)(!1&r||i>=r)&&Object.keys(o.O).every(function(e){return o.O[e](s[n])})?s.splice(n--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,r,i=s[0],l=s[1],n=s[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(n)var u=n(o)}for(t&&t(s);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},s=self["webpackChunktest_project"]=self["webpackChunktest_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],function(){return o(8119)});s=o.O(s)})();
//# sourceMappingURL=app.0cca0acf.js.map